<!DOCTYPE html>
<html>
<head>
    <title>Reveal.js 簡報編輯器</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/codemirror@5.63.3/lib/codemirror.min.css">
    <script src="https://cdn.jsdelivr.net/npm/codemirror@5.63.3/lib/codemirror.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/codemirror@5.63.3/mode/xml/xml.min.js"></script>
    <style>
        .editor-container {
            display: flex;
        }
        .CodeMirror {
            height: 500px;
        }
        .snippets {
            width: 200px;
            padding: 10px;
            background-color: #f5f5f5;
        }
    </style>
</head>
<body>
    <h1>Reveal.js 簡報編輯器</h1>
    <form method="post">
        <div class="editor-container">
            <textarea id="editor" name="content"></textarea>
            <div class="snippets">
                <h3>HTML 片段範例</h3>
                <ul>
                    <li>
                        <input type="checkbox" id="snippet1">
                        <label for="snippet1">新增投影片</label>
                        <pre>&lt;section&gt;&lt;/section&gt;</pre>
                    </li>
                    <li>
                        <input type="checkbox" id="snippet2">
                        <label for="snippet2">加入標題</label>
                        <pre>&lt;h2&gt;簡報標題&lt;/h2&gt;</pre>
                    </li>
                    <!-- 其他片段範例 -->
                </ul>
            </div>
        </div>
        <br>
        <button type="submit">預覽簡報</button>
    </form>

    <script>
        var editor = CodeMirror.fromTextArea(document.getElementById('editor'), {
            mode: 'xml',
            lineNumbers: true
        });

        // 監聽複選框變化,並將選取的片段插入編輯器
        var checkboxes = document.querySelectorAll('.snippets input[type="checkbox"]');
        for (var i = 0; i < checkboxes.length; i++) {
            checkboxes[i].addEventListener('change', function() {
                if (this.checked) {
                    var snippet = this.nextElementSibling.nextElementSibling.textContent;
                    editor.replaceSelection(snippet);
                }
            });
        }
    </script>
</body>
</html>
